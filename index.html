<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Générateur de Répondeur Téléphonique</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Générateur de Répondeur Téléphonique</h1>
            <p>Créez votre message vocal professionnel avec musique de fond</p>
        </header>

        <main>
            <!-- Sélection du mode -->
            <div class="mode-selector">
                <label>
                    <input type="radio" name="mode" value="server">
                    Mode Serveur (Meilleure qualité - Edge TTS)
                </label>
                <label>
                    <input type="radio" name="mode" value="client" checked>
                    Mode Client (Instantané - Navigateur)
                </label>
            </div>

            <form id="voiceForm">
                <div class="form-group">
                    <label for="textInput">Texte du message :</label>
                    <textarea 
                        id="textInput" 
                        name="text" 
                        rows="6" 
                        placeholder="Bonjour, vous êtes bien sur le répondeur de... Je ne suis pas disponible pour le moment..."
                        maxlength="500"
                        required
                    ></textarea>
                    <div class="char-counter">
                        <span id="charCount">0</span>/500 caractères
                    </div>
                </div>

                <div class="form-group" id="voiceGroup">
                    <label for="voiceSelect">Voix :</label>
                    <select id="voiceSelect" name="voice" required>
                        <!-- Pour Edge TTS -->
                        <option value="fr-FR-VivienneMultilingualNeural" selected>Vivienne (Femme - Multilingue)</option>
                        <option value="fr-FR-DeniseNeural">Denise (Femme - Standard)</option>
                        <option value="fr-FR-EloiseNeural">Eloise (Femme - Jeune)</option>
                        <option value="fr-FR-BrigitteNeural">Brigitte (Femme - Mature)</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="musicSelect">Musique de fond :</label>
                    <select id="musicSelect" name="music" required>
                        <option value="soft-piano">Piano doux</option>
                        <option value="corporate">Corporate</option>
                        <option value="ambient">Ambiance</option>
                        <option value="classical">Classique</option>
                        <option value="none">Sans musique</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="volumeSlider">Volume de la musique :</label>
                    <input 
                        type="range" 
                        id="volumeSlider" 
                        name="volume" 
                        min="0" 
                        max="100" 
                        value="30"
                    >
                    <span id="volumeValue">30%</span>
                </div>

                <button type="submit" id="generateBtn">
                    <span class="btn-text">Générer le répondeur</span>
                    <span class="spinner"></span>
                </button>
            </form>

            <div id="result" class="result-section hidden">
                <h2>Votre répondeur est prêt !</h2>
                <audio id="audioPlayer" controls></audio>
                <div class="download-section">
                    <button id="downloadBtn" class="download-btn">
                        Télécharger le fichier
                    </button>
                    <a id="downloadLink" class="hidden" download></a>
                </div>
            </div>

            <div id="error" class="error-message hidden"></div>

            <!-- Statut d'installation -->
            <div id="installStatus" class="install-status hidden">
                <h3>État de l'installation</h3>
                <div id="installMessages"></div>
                <button onclick="checkInstallation()" class="check-btn">Vérifier l'installation</button>
            </div>
        </main>

        <footer>
            <p>&copy; 2024 Générateur de Répondeur - Tous droits réservés</p>
        </footer>
    </div>

    <!-- Scripts -->
    <script src="js/script.js"></script>
    <script src="js/client-tts.js"></script>
    <script src="js/audio-mixer.js"></script>
</body>
</html>